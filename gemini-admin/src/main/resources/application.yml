#当前运行环境
spring:
  profiles:
    #dev：开发环境，prod：生产环境，test：测试环境
    active: dev

mybatis-plus:
  global-config:
    db-config:
      #主键类型：AUTO（数据库ID自增），NONE（），INPUT（用户输入ID），ID_WORKER（全局唯一ID (数字类型)）, UUID（全局唯一ID UUID），ID_WORKER_STR（全局唯一ID (字符类型)）
      id-type: AUTO
##  mapper-locations: classpath:/com/gemini/admin/*/mapper/*.xml
#  configuration:
#    # 开启驼峰命名匹配
#    map-underscore-to-camel-case: true
#    # 开启懒加载
#    lazyLoadingEnabled: true
#    aggressiveLazyLoading: false
#    # 开启缓存
#    cache-enabled: false
#    #配置JdbcTypeForNull, oracle数据库必须配置
#    jdbc-type-for-null: 'null'

logging:
  pattern:
    # 在控制台输出的日志的格式
    console: '[%-5level] [%d{yyyy-MM-dd HH:mm:ss.SSS}] [%thread] [%logger{50}] %n%msg%n%n'
    # 指定文件中日志输出的格式
    file: '[%-5level] [%d{yyyy-MM-dd HH:mm:ss.SSS}] [%thread] [%logger{50}] %n%msg%n%n'



---
########################################  开发环境dev  #######################################


server:
  port: 8001

#gemini自定义配置
gemini:
  #用户头像上传目录
  pictureUploadPath: E:/file/picture/


spring:
  profiles: dev
  datasource:
    druid:
      driver-class-name: com.p6spy.engine.spy.P6SpyDriver
      #      driver-class-name: com.mysql.cj.jdbc.Driver
      #Caused by: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust
      #解决方案：将useSSL改为false
      #The server time zone value '�й���׼ʱ��' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support
      #解决方案：url添加serverTimezone=UTC
      url: jdbc:p6spy:mysql://localhost:3306/boot_admin?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      #      url: jdbc:mysql://localhost:3306/gemini_core?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      username: root
      password: root
      #引入了p6spy模块后，需要指定db-type,不配置否则报错Caused by: java.lang.IllegalStateException: dbType not support : null, url jdbc:p6spy:mysql://localhost:3306/eshop_member?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      #解决方案：db-type: mysql
      db-type: mysql
      connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMills=5000
      filters: stat,wall,config
      min-evictable-idle-time-millis: 300000
      pool-prepared-statements: true
      stat-view-servlet:
        enabled: true
        login-username: 'admin'
        login-password: 'admin'
        reset-enable: true
      test-on-borrow: false
      test-on-return: false
      test-while-idle: true
      time-between-eviction-runs-millis: 60000
      validation-query: SELECT 1
      validation-query-timeout: 1000
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: '*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/* '
  redis:
    ## 单机配置
    host: 47.110.47.45
    port: 6378
    ## 集群配置
    #    cluster:
    #      nodes: 47.110.47.45:6378
    ## Redis数据库索引(默认为0)
    database: 0
    pool:
      ## 连接池最大连接数（使用负值表示没有限制）
      max-active: 300
      ## 连接池中的最大空闲连接
      max-idle: 100
      ## 连接池最大阻塞等待时间（使用负值表示没有限制）
      max-wait: -1
      ## 连接池中的最小空闲连接
      min-idle: 20
    ## 连接超时时间（毫秒）
    timeout: 60000
  resources:
    static-locations: classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/,file:${gemini.pictureUploadPath}
  thymeleaf:
    #开发的时候禁用模板引擎的缓存，否则修改刷新无效
    cache: false


---

########################################  生产环境prod  #######################################

server:
  port: 8000
#gemini自定义配置
gemini:
  #用户头像上传目录
  pictureUploadPath: /home/gemini/prod/pictrue

spring:
  profiles: prod
  datasource:
    druid:
      #      driver-class-name: com.p6spy.engine.spy.P6SpyDriver
      driver-class-name: com.mysql.cj.jdbc.Driver
      #Caused by: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust
      #解决方案：将useSSL改为false
      #The server time zone value '�й���׼ʱ��' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support
      #解决方案：url添加serverTimezone=UTC
      #      url: jdbc:p6spy:mysql://localhost:3306/gemini_core?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      url: jdbc:mysql://localhost:3306/gemini_core?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      username: root
      password: root
      #引入了p6spy模块后，需要指定db-type,不配置否则报错Caused by: java.lang.IllegalStateException: dbType not support : null, url jdbc:p6spy:mysql://localhost:3306/eshop_member?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      #解决方案：db-type: mysql
      db-type: mysql
      connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMills=5000
      filters: stat,wall,config
      min-evictable-idle-time-millis: 300000
      pool-prepared-statements: true
      stat-view-servlet:
        enabled: true
        login-username: 'admin'
        login-password: 'admin'
        reset-enable: true
      test-on-borrow: false
      test-on-return: false
      test-while-idle: true
      time-between-eviction-runs-millis: 60000
      validation-query: SELECT 1
      validation-query-timeout: 1000
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: '*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/* '
  redis:
    ## 单机配置
    host: 47.110.47.45
    port: 6378
    ## 集群配置
    #    cluster:
    #      nodes: 47.110.47.45:6378
    ## Redis数据库索引(默认为0)
    database: 0
    pool:
      ## 连接池最大连接数（使用负值表示没有限制）
      max-active: 300
      ## 连接池中的最大空闲连接
      max-idle: 100
      ## 连接池最大阻塞等待时间（使用负值表示没有限制）
      max-wait: -1
      ## 连接池中的最小空闲连接
      min-idle: 20
    ## 连接超时时间（毫秒）
    timeout: 60000
  resources:
    static-locations: classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/,file:${gemini.pictureUploadPath}



---

########################################  测试环境test  #######################################

server:
  port: 8888
#gemini自定义配置
gemini:
  pictureUploadPath: /home/test/pictrue


spring:
  profiles: test
  datasource:
    druid:
      #      driver-class-name: com.p6spy.engine.spy.P6SpyDriver
      driver-class-name: com.mysql.cj.jdbc.Driver
      #Caused by: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust
      #解决方案：将useSSL改为false
      #The server time zone value '�й���׼ʱ��' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support
      #解决方案：url添加serverTimezone=UTC
      #      url: jdbc:p6spy:mysql://localhost:3306/gemini_core?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      url: jdbc:mysql://localhost:3306/gemini_core?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=UTC
      username: root
      password: root
      #引入了p6spy模块后，需要指定db-type,不配置否则报错Caused by: java.lang.IllegalStateException: dbType not support : null, url jdbc:p6spy:mysql://localhost:3306/eshop_member?useUnicode=true&characterEncoding=UTF-8&useSSL=false
      #解决方案：db-type: mysql
      db-type: mysql
      connection-properties: druid.stat.mergeSql=true;druid.stat.slowSqlMills=5000
      filters: stat,wall,config
      min-evictable-idle-time-millis: 300000
      pool-prepared-statements: true
      stat-view-servlet:
        enabled: true
        login-username: 'admin'
        login-password: 'admin'
        reset-enable: true
      test-on-borrow: false
      test-on-return: false
      test-while-idle: true
      time-between-eviction-runs-millis: 60000
      validation-query: SELECT 1
      validation-query-timeout: 1000
      web-stat-filter:
        enabled: true
        url-pattern: /*
        exclusions: '*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/* '
  redis:
    ## 单机配置
    host: 47.110.47.45
    port: 6378
    ## 集群配置
    #    cluster:
    #      nodes: 47.110.47.45:6378
    ## Redis数据库索引(默认为0)
    database: 0
    pool:
      ## 连接池最大连接数（使用负值表示没有限制）
      max-active: 300
      ## 连接池中的最大空闲连接
      max-idle: 100
      ## 连接池最大阻塞等待时间（使用负值表示没有限制）
      max-wait: -1
      ## 连接池中的最小空闲连接
      min-idle: 20
    ## 连接超时时间（毫秒）
    timeout: 60000
  resources:
    static-locations: classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/,file:${gemini.pictureUploadPath}

