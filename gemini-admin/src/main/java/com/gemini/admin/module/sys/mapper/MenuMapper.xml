<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gemini.admin.module.sys.mapper.MenuMapper">

    <select id="getByAccount" parameterType="java.lang.String"
            resultType="com.gemini.admin.module.sys.model.Menu">
        SELECT DISTINCT t2.*
        FROM t_sys_user_role t
        LEFT JOIN t_sys_permissions t1
        ON t.role_id = t1.permissions_id
        LEFT JOIN t_sys_menu t2
        ON t1.menu_id = t2.id
        WHERE t2.type != 'button' AND t.user_account = #{account,jdbcType=VARCHAR}
        ORDER BY t2.pid,t2.sort
    </select>

    <delete id="deleteMenuAut" parameterType="java.lang.Integer">
        delete from t_sys_permissions
        where menu_id=#{id}
    </delete>

</mapper>